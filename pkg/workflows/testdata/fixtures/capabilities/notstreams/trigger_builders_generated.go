// Code generated by github.com/smartcontractkit/chainlink-common/pkg/capabilities/cli, DO NOT EDIT.

package notstreams

import (
	"github.com/smartcontractkit/chainlink-common/pkg/capabilities"
	"github.com/smartcontractkit/chainlink-common/pkg/workflows"
)

func (cfg TriggerConfig) New(w *workflows.WorkflowSpecFactory) FeedCap {
	ref := "trigger"
	def := workflows.StepDefinition{
		ID: "notstreams@1.0.0", Ref: ref,
		Inputs: workflows.StepInputs{},
		Config: map[string]any{
			"maxFrequencyMs": cfg.MaxFrequencyMs,
		},
		CapabilityType: capabilities.CapabilityTypeTrigger,
	}

	step := workflows.Step[Feed]{Definition: def}
	return FeedCapFromStep(w, step)
}

type FeedCap interface {
	workflows.CapDefinition[Feed]
	ID() workflows.CapDefinition[string]
	Metadata() SignerMetadataCap
	Payload() FeedReportCap
	Timestamp() workflows.CapDefinition[string]
	TriggerType() workflows.CapDefinition[string]
	private()
}

// FeedCapFromStep should only be called from generated code to assure type safety
func FeedCapFromStep(w *workflows.WorkflowSpecFactory, step workflows.Step[Feed]) FeedCap {
	raw := step.AddTo(w)
	return &feed{CapDefinition: raw}
}

type feed struct {
	workflows.CapDefinition[Feed]
}

func (*feed) private() {}
func (c *feed) ID() workflows.CapDefinition[string] {
	return workflows.AccessField[Feed, string](c.CapDefinition, "ID")
}
func (c *feed) Metadata() SignerMetadataCap {
	return &signerMetadata{CapDefinition: workflows.AccessField[Feed, SignerMetadata](c.CapDefinition, "Metadata")}
}
func (c *feed) Payload() FeedReportCap {
	return &feedReport{CapDefinition: workflows.AccessField[Feed, FeedReport](c.CapDefinition, "Payload")}
}
func (c *feed) Timestamp() workflows.CapDefinition[string] {
	return workflows.AccessField[Feed, string](c.CapDefinition, "Timestamp")
}
func (c *feed) TriggerType() workflows.CapDefinition[string] {
	return workflows.AccessField[Feed, string](c.CapDefinition, "TriggerType")
}

func NewFeedFromFields(
	iD workflows.CapDefinition[string],
	metadata SignerMetadataCap,
	payload FeedReportCap,
	timestamp workflows.CapDefinition[string],
	triggerType workflows.CapDefinition[string]) FeedCap {
	return &simpleFeed{
		CapDefinition: workflows.ComponentCapDefinition[Feed]{
			"ID":          iD.Ref(),
			"Metadata":    metadata.Ref(),
			"Payload":     payload.Ref(),
			"Timestamp":   timestamp.Ref(),
			"TriggerType": triggerType.Ref(),
		},
		iD:          iD,
		metadata:    metadata,
		payload:     payload,
		timestamp:   timestamp,
		triggerType: triggerType,
	}
}

type simpleFeed struct {
	workflows.CapDefinition[Feed]
	iD          workflows.CapDefinition[string]
	metadata    SignerMetadataCap
	payload     FeedReportCap
	timestamp   workflows.CapDefinition[string]
	triggerType workflows.CapDefinition[string]
}

func (c *simpleFeed) ID() workflows.CapDefinition[string] {
	return c.iD
}
func (c *simpleFeed) Metadata() SignerMetadataCap {
	return c.metadata
}
func (c *simpleFeed) Payload() FeedReportCap {
	return c.payload
}
func (c *simpleFeed) Timestamp() workflows.CapDefinition[string] {
	return c.timestamp
}
func (c *simpleFeed) TriggerType() workflows.CapDefinition[string] {
	return c.triggerType
}

func (c *simpleFeed) private() {}

type FeedReportCap interface {
	workflows.CapDefinition[FeedReport]
	BuyPrice() workflows.CapDefinition[string]
	FullReport() workflows.CapDefinition[string]
	ObservationTimestamp() workflows.CapDefinition[int]
	ReportContext() workflows.CapDefinition[string]
	SellPrice() workflows.CapDefinition[string]
	Signature() workflows.CapDefinition[string]
	private()
}

// FeedReportCapFromStep should only be called from generated code to assure type safety
func FeedReportCapFromStep(w *workflows.WorkflowSpecFactory, step workflows.Step[FeedReport]) FeedReportCap {
	raw := step.AddTo(w)
	return &feedReport{CapDefinition: raw}
}

type feedReport struct {
	workflows.CapDefinition[FeedReport]
}

func (*feedReport) private() {}
func (c *feedReport) BuyPrice() workflows.CapDefinition[string] {
	return workflows.AccessField[FeedReport, string](c.CapDefinition, "BuyPrice")
}
func (c *feedReport) FullReport() workflows.CapDefinition[string] {
	return workflows.AccessField[FeedReport, string](c.CapDefinition, "FullReport")
}
func (c *feedReport) ObservationTimestamp() workflows.CapDefinition[int] {
	return workflows.AccessField[FeedReport, int](c.CapDefinition, "ObservationTimestamp")
}
func (c *feedReport) ReportContext() workflows.CapDefinition[string] {
	return workflows.AccessField[FeedReport, string](c.CapDefinition, "ReportContext")
}
func (c *feedReport) SellPrice() workflows.CapDefinition[string] {
	return workflows.AccessField[FeedReport, string](c.CapDefinition, "SellPrice")
}
func (c *feedReport) Signature() workflows.CapDefinition[string] {
	return workflows.AccessField[FeedReport, string](c.CapDefinition, "Signature")
}

func NewFeedReportFromFields(
	buyPrice workflows.CapDefinition[string],
	fullReport workflows.CapDefinition[string],
	observationTimestamp workflows.CapDefinition[int],
	reportContext workflows.CapDefinition[string],
	sellPrice workflows.CapDefinition[string],
	signature workflows.CapDefinition[string]) FeedReportCap {
	return &simpleFeedReport{
		CapDefinition: workflows.ComponentCapDefinition[FeedReport]{
			"BuyPrice":             buyPrice.Ref(),
			"FullReport":           fullReport.Ref(),
			"ObservationTimestamp": observationTimestamp.Ref(),
			"ReportContext":        reportContext.Ref(),
			"SellPrice":            sellPrice.Ref(),
			"Signature":            signature.Ref(),
		},
		buyPrice:             buyPrice,
		fullReport:           fullReport,
		observationTimestamp: observationTimestamp,
		reportContext:        reportContext,
		sellPrice:            sellPrice,
		signature:            signature,
	}
}

type simpleFeedReport struct {
	workflows.CapDefinition[FeedReport]
	buyPrice             workflows.CapDefinition[string]
	fullReport           workflows.CapDefinition[string]
	observationTimestamp workflows.CapDefinition[int]
	reportContext        workflows.CapDefinition[string]
	sellPrice            workflows.CapDefinition[string]
	signature            workflows.CapDefinition[string]
}

func (c *simpleFeedReport) BuyPrice() workflows.CapDefinition[string] {
	return c.buyPrice
}
func (c *simpleFeedReport) FullReport() workflows.CapDefinition[string] {
	return c.fullReport
}
func (c *simpleFeedReport) ObservationTimestamp() workflows.CapDefinition[int] {
	return c.observationTimestamp
}
func (c *simpleFeedReport) ReportContext() workflows.CapDefinition[string] {
	return c.reportContext
}
func (c *simpleFeedReport) SellPrice() workflows.CapDefinition[string] {
	return c.sellPrice
}
func (c *simpleFeedReport) Signature() workflows.CapDefinition[string] {
	return c.signature
}

func (c *simpleFeedReport) private() {}

type SignerMetadataCap interface {
	workflows.CapDefinition[SignerMetadata]
	Signer() workflows.CapDefinition[string]
	private()
}

// SignerMetadataCapFromStep should only be called from generated code to assure type safety
func SignerMetadataCapFromStep(w *workflows.WorkflowSpecFactory, step workflows.Step[SignerMetadata]) SignerMetadataCap {
	raw := step.AddTo(w)
	return &signerMetadata{CapDefinition: raw}
}

type signerMetadata struct {
	workflows.CapDefinition[SignerMetadata]
}

func (*signerMetadata) private() {}
func (c *signerMetadata) Signer() workflows.CapDefinition[string] {
	return workflows.AccessField[SignerMetadata, string](c.CapDefinition, "Signer")
}

func NewSignerMetadataFromFields(
	signer workflows.CapDefinition[string]) SignerMetadataCap {
	return &simpleSignerMetadata{
		CapDefinition: workflows.ComponentCapDefinition[SignerMetadata]{
			"Signer": signer.Ref(),
		},
		signer: signer,
	}
}

type simpleSignerMetadata struct {
	workflows.CapDefinition[SignerMetadata]
	signer workflows.CapDefinition[string]
}

func (c *simpleSignerMetadata) Signer() workflows.CapDefinition[string] {
	return c.signer
}

func (c *simpleSignerMetadata) private() {}
