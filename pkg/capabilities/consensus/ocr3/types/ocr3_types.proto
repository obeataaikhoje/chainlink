syntax = "proto3";

option go_package = "capabilities/consensus/ocr3/types";

package ocr3_types;

import "values/pb/values.proto";

// per-workflow aggregation outcome
message AggregationOutcome {
  values.Map encodableOutcome = 1; // passed to encoders
  bytes metadata = 2; // internal to the aggregator
  bool shouldReport = 3;
}

message Query {
  // the requests to get consensus on.
  repeated Id ids = 1;
}

message Id {
  string workflowExecutionId = 1;
  string workflowId = 2;
}

message Observation {
  Id id = 1;
  values.Value observation = 3;
}

message Observations {
  repeated Observation observations = 1;
}

message Outcome {
  map<string, AggregationOutcome> outcomes = 1;
  repeated Id reports_to_generate = 2;
}
